# üì¶ WABA (WhatsApp Business API) ‚Äì –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM –∏ —á–∞—Ç–∞–º–∏
### –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–∏—ë–º–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ WhatsApp Business API (WABA) —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ CRM (–Ω–∞–ø—Ä–∏–º–µ—Ä, amoCRM), –≤–∫–ª—é—á–∞—è:
- —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
- WebSocket-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π —á–µ—Ä–µ–∑ RabbitMQ
---
## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.12+
- Docker –∏ Docker Compose
- PostgreSQL
- Redis
- RabbitMQ
---
## üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker
```bash
  docker-compose up -d --build
```
### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
  docker-compose logs app
```
---
## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
waba_api/
‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ FastAPI
‚îú‚îÄ‚îÄ docker-compose.yml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ Dockerfile               # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env*                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # FastAPI —Ä–æ—É—Ç–µ—Ä—ã (amoCRM, Meta, RabbitMQ)
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/          # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/      # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ utils/               # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis, RMQ, –ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ settings/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
---
## üß† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Meta API
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ amoCRM
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å–≤—è–∑–∫–µ –∫–ª–∏–µ–Ω—Ç-–æ–ø–µ—Ä–∞—Ç–æ—Ä
- WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—á–µ—Ä–µ–¥–∏ RabbitMQ
- Redis –∫—ç—à
- Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
---
## üõ†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
```bash
    docker-compose run alembic alembic revision --autogenerate -m "your message"
```
```bash
  docker-compose run alembic alembic upgrade head
```
---
## üì° –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- .env ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- .env.redis ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis
- .env.rmq ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RabbitMQ
- .env.chat, .env.amo, .env.meta ‚Äî –¥–æ—Å—Ç—É–ø—ã –∫ –≤–Ω–µ—à–Ω–∏–º API

–ü—Ä–∏–º–µ—Ä .env:
```dotenv
POSTGRES_DB=waba
POSTGRES_USER=admin
POSTGRES_PASSWORD=secret
```
---
### üß© –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- FastAPI
- SQLAlchemy 2.0
- Alembic
- PostgreSQL
- Redis
- RabbitMQ (aio-pika)
- Docker
---
